# ðŸ›¡ï¸ ÐÐ Ð¥Ð˜Ð¢Ð•ÐšÐ¢Ð£Ð Ð Ð ÐÐ—Ð Ð•Ð¨Ð•ÐÐ˜Ð™

## 1. Ð£Ð ÐžÐ’ÐÐ˜ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜

### Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ 1: Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ (getEloquentQuery)
- **Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚**: ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚, ÐºÐ°ÐºÐ¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð²Ð¸Ð´Ð¸Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ
- **Ð“Ð´Ðµ**: `AssignmentResource::getEloquentQuery()`
- **ÐŸÑ€Ð°Ð²Ð¸Ð»Ð¾**: Ð•ÑÐ»Ð¸ Ð·Ð°Ð¿Ð¸ÑÑŒ Ð½Ðµ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ ÑÑ‚Ð¾Ñ‚ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ - ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð½Ðµ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ

### Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ 2: ÐŸÐ¾Ð»Ð¸Ñ‚Ð¸ÐºÐ¸ (Policies)
- **Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚**: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, Ð¼Ð¾Ð¶ÐµÑ‚ Ð»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ñ ÐšÐžÐÐšÐ Ð•Ð¢ÐÐžÐ™ Ð·Ð°Ð¿Ð¸ÑÑŒÑŽ
- **Ð“Ð´Ðµ**: `App\Policies\AssignmentPolicy`
- **Ð’Ñ‹Ð·Ð¾Ð²**: `$user->can('confirm', $assignment)`

### Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ 3: Actions Ð² Filament
- **Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚**: ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð¸ Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ ÐºÐ½Ð¾Ð¿Ð¾Ðº
- **Ð“Ð´Ðµ**: `AssignmentResource::table()`
- **ÐŸÑ€Ð°Ð²Ð¸Ð»Ð¾**: `visible()` Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð·Ð°Ð¿Ð¸ÑÐ¸ + Ð¿Ð¾Ð»Ð¸Ñ‚Ð¸ÐºÑƒ

## 2. ÐŸÐžÐ¢ÐžÐš ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜
ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ AssignmentResource
â†“
Filament Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ getEloquentQuery() â†’ Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð·Ð°Ð¿Ð¸ÑÐµÐ¹
â†“
Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ñ‚Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð¿Ð¾Ð¿Ð°Ð´Ð°ÑŽÑ‚ Ð² Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ
â†“
Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ÑÑ visible() Ñƒ ÐºÐ½Ð¾Ð¿Ð¾Ðº
â†“
visible() Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ $user->can('confirm', $record)
â†“
Laravel Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ AssignmentPolicy::confirm()
â†“
ÐŸÐ¾Ð»Ð¸Ñ‚Ð¸ÐºÐ° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ true/false
â†“
ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ/ÑÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ


## 3. ÐšÐ›Ð®Ð§Ð•Ð’Ð«Ð• ÐžÐ¨Ð˜Ð‘ÐšÐ˜

### ÐžÑˆÐ¸Ð±ÐºÐ° 1: Ð¡Ð¼ÐµÑˆÐµÐ½Ð¸Ðµ Gates Ð¸ Policies
- âŒ **ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾**: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Gates Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¾Ðº ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ñ… Ñ Ð¼Ð¾Ð´ÐµÐ»ÑÐ¼Ð¸
- âœ… **ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾**: Gates - Ð´Ð»Ñ Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿Ñ€Ð°Ð², Policies - Ð´Ð»Ñ Ð¿Ñ€Ð°Ð² Ð½Ð° Ð¼Ð¾Ð´ÐµÐ»Ð¸

### ÐžÑˆÐ¸Ð±ÐºÐ° 2: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¿Ð¾Ð»Ð¸Ñ‚Ð¸Ðº
- âŒ `if (!$user->can('update_assignment'))` Ð² Ð¿Ð¾Ð»Ð¸Ñ‚Ð¸ÐºÐµ
- âœ… ÐŸÐ¾Ð»Ð¸Ñ‚Ð¸ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ð‘Ð˜Ð—ÐÐ•Ð¡-Ð›ÐžÐ“Ð˜ÐšÐ£, Filament Shield - Ð ÐÐ—Ð Ð•Ð¨Ð•ÐÐ˜Ð¯

### ÐžÑˆÐ¸Ð±ÐºÐ° 3: ÐÐµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ auth()->check()
- âŒ `auth()->user()->can(...)` Ð±ÐµÐ· Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
- âœ… `auth()->check() && auth()->user()->can(...)`