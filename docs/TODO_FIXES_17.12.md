## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û 16.12.2025

### WorkRequest –∏ Contractor –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–æ –ø–æ–ª–µ `request_prefix` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `contractors`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `work_requests`:
  - –î–æ–±–∞–≤–ª–µ–Ω—ã: `request_number`, `external_number`, `personnel_type`, `contractor_id`, `is_custom_address`, `custom_address`, `contact_person`, `deleted_at`
  - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ: `estimated_shift_duration` ‚Üí `estimated_duration_minutes`
  - –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä—É—é—â–µ–µ: `mass_personnel_names` (–æ—Å—Ç–∞–≤–ª–µ–Ω–æ `desired_workers`)
  - –û–±–Ω–æ–≤–ª–µ–Ω ENUM —Å—Ç–∞—Ç—É—Å–æ–≤

**–ú–æ–¥–µ–ª–∏:**
- ‚úÖ `WorkRequest`: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ —Å –º–µ—Ç–æ–¥–∞–º–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—è–º–∏, workflow
- ‚úÖ `Contractor`: –£–¥–∞–ª–µ–Ω –º–µ—Ç–æ–¥ `generateRequestPrefix()`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `contractor_code`
- ‚úÖ `MassPersonnelReport`: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É (—É–¥–∞–ª–µ–Ω–æ `specialty_id`)

**Filament Resources:**
- ‚úÖ `WorkRequestResource`: –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏, –ø–æ–ª—è–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞, —Å—Ç–∞—Ç—É—Å–∞–º–∏
- ‚úÖ `ContractorResource`: –£–±—Ä–∞–Ω–æ –ø–æ–ª–µ `request_prefix`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `contractor_code`
- ‚úÖ `MassPersonnelReportResource`: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π —Å–≤—è–∑—å—é `specialty`

**–õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤ –∑–∞—è–≤–æ–∫:**
- ‚úÖ –î–ª—è –Ω–∞—à–∏—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π: `WR-{category_prefix}-{year}-{sequence}`
- ‚úÖ –î–ª—è –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤: `WR-{contractor_code}-{year}-{sequence}`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ workflow:**
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ–Ω –∏ –æ—Ç—á–µ—Ç–æ–≤
   - –†–∞—Å—á–µ—Ç—ã –∏ –æ–ø–ª–∞—Ç–∞

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π:**
   - –°–≤—è–∑—å WorkRequest ‚Üí Assignment ‚Üí Shift
   - –°–≤—è–∑—å WorkRequest ‚Üí MassPersonnelReport ‚Üí ContractorWorker
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ –≤ API

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –û–±–Ω–æ–≤–∏—Ç—å SYSTEM_OVERVIEW.md —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π WorkRequest
   - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ workflow –∑–∞—è–≤–æ–∫

## üîß –ó–ê–î–ê–ß–ê: –î–æ—Ä–∞–±–æ—Ç–∫–∞ ContractorResource RelationManagers

### –°—Ç–∞—Ç—É—Å: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** $(date +"%d.%m.%Y %H:%M")

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:**

1. **ContractorRatesRelationManager:**
   - –ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å –ø–æ–ª—è–º–∏: –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å, —Ç–∏–ø —Å—Ç–∞–≤–∫–∏, —Å—Ç–∞–≤–∫–∞ –≤ —á–∞—Å
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Ç–∏–ø—É —Å—Ç–∞–≤–∫–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –î–µ–π—Å—Ç–≤–∏—è: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–º–µ–Ω–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - –ì—Ä—É–ø–ø–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: –∞–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ contractor_id –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

2. **WorkRequestsRelationManager:**
   - –ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–æ–∫
   - –ü–æ–ª—è: –¥–∞—Ç–∞ —Ä–∞–±–æ—Ç, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤, –∞–¥—Ä–µ—Å, –ø—Ä–æ–µ–∫—Ç
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É, –¥–∞—Ç–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –Ω–∞–ª–∏—á–∏—é —Å–º–µ–Ω
   - –î–µ–π—Å—Ç–≤–∏—è: –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–º–µ–Ω, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ contractor_id –∏ personnel_type
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ContractorResource:**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã RelationManagers –≤ getRelations()
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ —Ç–∞–±–ª–∏—Ü–µ –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ –¥–ª—è –ø–æ–¥—Ä—è–¥—á–∏–∫–∞
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –¥–ª—è –ø–æ–¥—Ä—è–¥—á–∏–∫–∞  
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞—è–≤–æ–∫
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–µ–π —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É UsersRelationManager (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π workflow: –ü–æ–¥—Ä—è–¥—á–∏–∫ ‚Üí –°—Ç–∞–≤–∫–∏ ‚Üí –ó–∞—è–≤–∫–∏ ‚Üí –ù–∞–∑–Ω–∞—á–µ–Ω–∏—è ‚Üí –°–º–µ–Ω—ã
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å permissions –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ RelationManagers

