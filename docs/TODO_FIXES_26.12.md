# TODO_FIXES.md - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (26.12.2025)

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Spatie Permissions
- [x] –£–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- [x] –°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã Spatie (permissions, roles –∏ —Ç.–¥.)
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (teams=false)

### 2. –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã Providers (–Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã Policies (7 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö)
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ Gates (—Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)

## üéØ –¢–ï–ö–£–©–ê–Ø –ó–ê–î–ê–ß–ê: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Filament Shield

### –í—ã–±—Ä–∞–Ω –ø–æ–¥—Ö–æ–¥: –ì–ò–ë–†–ò–î–ù–´–ô
- Shield –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ permissions
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ Gates —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
1. [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Shield: `sail composer require bezhansalleh/filament-shield`
2. [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ (exclude —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤)
3. [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å permissions: `sail artisan shield:generate --all`
4. [ ] –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞: `sail artisan shield:super-admin`
5. [ ] –û–±–Ω–æ–≤–∏—Ç—å AuthServiceProvider (–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏)

## üìä –°–¢–ê–¢–£–° –ü–†–û–ï–ö–¢–ê:

**–¢–∞–±–ª–∏—Ü—ã Spatie:** ‚úÖ –°–æ–∑–¥–∞–Ω—ã
**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏:** ‚úÖ 7 —à—Ç. (—Å–æ—Ö—Ä–∞–Ω—è–µ–º)
**–ö–∞—Å—Ç–æ–º–Ω—ã–µ Gates:** ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º
**Filament Shield:** ‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:

1. **–ù–ï —É–¥–∞–ª—è–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏** - –≤ –Ω–∏—Ö —É–∂–µ –µ—Å—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ exclude –≤ Shield** –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏
3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ Gates** - –æ–Ω–∏ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
4. **–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Shield** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö Gates

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

### –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Shield:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∞–¥–º–∏–Ω–∫–∏ (/admin)
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–∞—Å—Ç–æ–º–Ω—ã–µ Gates —Ä–∞–±–æ—Ç–∞—é—Ç
3. –°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ Resources (MassPersonnelReport –∏ –¥—Ä.)
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# TODO_FIXES.md - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (26.12.2025)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Filament Shield
- [x] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–∫–µ—Ç bezhansalleh/filament-shield
- [x] –°–æ–∑–¥–∞–Ω –∫–æ–Ω—Ñ–∏–≥ filament-shield.php
- [x] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã permissions –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–¥–µ—Ä–æ–≤
- [x] RoleSeeder –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (–±–µ–∑ –ø–æ–ª—è description)
- [x] UserSeeder –ø—Ä–æ–≤–µ—Ä–µ–Ω (–Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è viewer)
- [x] UserSeeder –¥–æ–ø–æ–ª–Ω–µ–Ω —É–¥–∞–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ä–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è viewer
- [x] DatabaseSeeder —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º

### 3. –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- [x] CRUD permissions —Å–æ–∑–¥–∞–Ω—ã Shield –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- [x] –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ (7 —à—Ç.) —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (–≤ except)
- [x] Admin –∏–º–µ–µ—Ç –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [x] –î—Ä—É–≥–∏–µ —Ä–æ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (–Ω–∞—Å—Ç—Ä–æ–∏–º —á–µ—Ä–µ–∑ UI)

## üéØ –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°:

**–ì–æ—Ç–æ–≤–æ –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É:** ‚úÖ

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

### 1. –§–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
sail artisan shield:generate --all
sail artisan db:seed --force
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ (admin@example.com / password123)

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–Ω–µ–ª—å Shield (/admin/shield/roles)

* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É admin –µ—Å—Ç—å –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —á–µ—Ä–µ–∑ UI

1. –ó–∞–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –∫–∞–∫ admin

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞" ‚Üí "–†–æ–ª–∏"

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## üìä –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:

* Permissions: 100+ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã)

* –†–æ–ª–∏: 10 (–≤—Å–µ —Ä–æ–ª–∏ –∏–∑ RoleSeeder)

* Admin: –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω —Å–æ –≤—Å–µ–º–∏ permissions

* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 31+ (–∏–∑ UserSeeder)

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø:

1. Shield: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç permissions –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

2. Except: 7 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω—ã (–∏—Ö –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)

3. –†–æ–ª–∏: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–æ–ª–∏ –±–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π

4. –î–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏: –ß–µ—Ä–µ–∑ FilamentUser –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –º–æ–¥–µ–ª–∏ User



## üßπ –û–ß–ò–°–¢–ö–ê –£–°–¢–ê–†–ï–í–®–ò–• –ú–ò–ì–†–ê–¶–ò–ô PERMISSIONS (26.12.2025)

### –ü—Ä–æ–±–ª–µ–º–∞:
–ü–æ—Å–ª–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ Spatie Permissions –∏ Filament Shield –æ—Å—Ç–∞–ª–∏—Å—å —Å—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π.

### –†–µ—à–µ–Ω–∏–µ:
1. ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ permissions (–ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ backup):
   - `2025_12_11_112006_add_admin_role_and_fix_permissions.php`
   - `2025_12_12_152336_add_contractor_roles_and_permissions.php` 
   - `2025_12_22_144233_add_group_and_description_to_permissions_table.php`
2. ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ `2025_12_26_130000_create_permission_tables`
3. ‚úÖ –≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è Spatie Permissions
4. ‚úÖ Filament Shield –∑–∞—Ç–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

### –ü–æ—á–µ–º—É —Ç–∞–∫:
1. **Spatie Permissions** —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã
2. **Filament Shield** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
3. **–°—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏** –ø—ã—Ç–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º
4. **–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥**: Shield –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `shield:generate`

### –ö–æ–º–∞–Ω–¥—ã:
```bash
# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
mkdir -p database/migrations_backup/permissions_old
mv database/migrations/*permission*.php database/migrations_backup/permissions_old/
mv database/migrations/*role*.php database/migrations_backup/permissions_old/

# –ó–∞–ø—É—Å–∫ —á–∏—Å—Ç–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ permissions
sail artisan migrate --path=database/migrations/2025_12_26_130000_create_permission_tables.php

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
sail artisan migrate
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

–ß–∏—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ permissions –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –≥–æ—Ç–æ–≤–∞—è –∫ —Ä–∞–±–æ—Ç–µ —Å Filament Shield.

–°—Ç–∞—Ç—É—Å: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ


## ‚úÖ –†–ï–®–ï–ù–ò–ï –û–®–ò–ë–ö–ò AddressPolicy (27.12.2025 - –§–ò–ù–ê–õ–¨–ù–û–ï)

### –ü—Ä–æ–±–ª–µ–º–∞:
–ü–∞–ø–∫–∞ app/Policies –ø—É—Å—Ç–∞, –Ω–æ AuthServiceProvider –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏.

### –†–µ—à–µ–Ω–∏–µ (–í–∞—Ä–∏–∞–Ω—Ç 1):
1. ‚úÖ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫ –∏–∑ AuthServiceProvider
2. ‚úÖ –û—á–∏—â–µ–Ω –º–∞—Å—Å–∏–≤ $policies
3. ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ Gates

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π AuthServiceProvider:
- –£–±—Ä–∞–Ω—ã –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –ø–æ–ª–∏—Ç–∏–∫
- –ú–∞—Å—Å–∏–≤ $policies –ø—É—Å—Ç–æ–π
- Gates –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–¥–µ—Ç–µ–∫—Ç–∞ –ø–æ–ª–∏—Ç–∏–∫

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
–ê–¥–º–∏–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑:
1. Spatie Permissions (–¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π)
2. –ö–∞—Å—Ç–æ–º–Ω—ã–µ Gates (–¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏)
3. –†–æ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è Filament Shield

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–∫–∏ AddressPolicy.php
2. –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω–∫–µ
3. –†–∞–±–æ—Ç–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö Gates
