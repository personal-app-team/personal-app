# üõ†Ô∏è TODO FIXES - 28.11.2024

## üìã –û–ë–ó–û–† –ò–ó–ú–ï–ù–ï–ù–ò–ô

### ‚úÖ –í–ù–ï–î–†–ï–ù–ù–´–ï –ú–û–î–ï–õ–ò:
1. **Department** - –æ—Ç–¥–µ–ª—ã/–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π
2. **EmploymentHistory** - –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

### ‚úÖ –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –ú–û–î–ï–õ–¨:
- **User** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–≤—è–∑–∏ —Å EmploymentHistory, —É–ª—É—á—à–µ–Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

## üîç –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ê–ù–ê–õ–ò–ó–ê

### üü¢ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û:

#### –ú–æ–¥–µ–ª–∏ –∏ —Å–≤—è–∑–∏:
- [x] –ú–æ–¥–µ–ª—å Department —Å –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (parent_id, manager_id)
- [x] –ú–æ–¥–µ–ª—å EmploymentHistory —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞  
- [x] –°–≤—è–∑–∏ User ‚Üî EmploymentHistory (hasMany + hasOne)
- [x] –°–≤—è–∑–∏ Department ‚Üî EmploymentHistory
- [x] –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ User (getExecutorTypeInfo, determineUserType –∏ –¥—Ä.)

#### –ú–∏–≥—Ä–∞—Ü–∏–∏:
- [x] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü departments –∏ employment_history
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ user_type –≤ users
- [x] –ü–µ—Ä–µ–Ω–æ—Å contract_type_id –∏ tax_status_id –∏–∑ users –≤ employment_history
- [x] –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–µ–π –∏–∑ users

### üü° –¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò:

#### 1. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç Filament Resources:
- [ ] DepartmentResource
- [ ] EmploymentHistoryResource

#### 2. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ UserResource:
- [ ] –°—Ç–∞—Ä—ã–µ –ø–æ–ª—è contract_type_id –∏ tax_status_id –º–æ–≥—É—Ç –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–µ
- [ ] –ù–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è employment history –≤ RelationManager
- [ ] –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ user_type

#### 3. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
- [ ] –ú–µ—Ç–æ–¥ determinePosition –≤ –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–æ–ª–∂–Ω–æ—Å—Ç—å
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ boot() –º–æ–¥–µ–ª–∏ User –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–î–ê–ß–ò

### 1. –°–û–ó–î–ê–ù–ò–ï FILAMENT RESOURCES
```bash
# –°–æ–∑–¥–∞—Ç—å Resources –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
sail artisan make:filament-resource Department --generate
sail artisan make:filament-resource EmploymentHistory --generate
```

### 2. **–û–ë–ù–û–í–õ–ï–ù–ò–ï UserResource**

- –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è contract_type_id –∏ tax_status_id –∏–∑ —Ñ–æ—Ä–º—ã

- –î–æ–±–∞–≤–∏—Ç—å RelationManager –¥–ª—è EmploymentHistory

- –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ user_type

### 3. **–ü–†–û–í–ï–†–ö–ê –î–ê–ù–ù–´–•**

```php
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
$usersWithEmployment = User::has('employmentHistory')->count();
$usersWithoutEmployment = User::doesntHave('employmentHistory')->count();
```

### 4. **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï API**

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π

- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìù –°–ü–ò–°–û–ö –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### **–í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**

1. –°–æ–∑–¥–∞—Ç—å DepartmentResource

2. –°–æ–∑–¥–∞—Ç—å EmploymentHistoryResource

3. –û–±–Ω–æ–≤–∏—Ç—å UserResource - —É–±—Ä–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è

4. –î–æ–±–∞–≤–∏—Ç—å EmploymentHistoryRelationManager –≤ UserResource

5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

### **–°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**

6. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ user_type –≤ UserResource

7. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è EmploymentHistory

8. –°–æ–∑–¥–∞—Ç—å —Å–∏–¥—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### **–ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**

9. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ User

10. –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ Resources

## üö® –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (28.11.2024)

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï:
1. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç EmploymentHistoryResource** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏—Å—Ç–æ—Ä–∏–µ–π —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
2. **–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ contract_type_id –∏ tax_status_id

### üü° –í–¢–û–†–ò–ß–ù–´–ï:
3. **UserResource –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è** –≤ —Ñ–æ—Ä–º–µ (contract_type_id, tax_status_id)
4. **–ù–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è departments –∏ employment_history
5. **–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã** –ø–æ user_type –≤ UserResource

### ‚úÖ –†–ï–®–ï–ù–ù–´–ï:
- [x] –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- [x] DepartmentResource —Å–æ–∑–¥–∞–Ω
- [x] EmploymentHistoryRelationManager —Å–æ–∑–¥–∞–Ω –≤ UserResource

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´ (28.11.2024)

### ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û:
1. **–°–æ–∑–¥–∞–Ω EmploymentHistoryResource** - `sail artisan make:filament-resource EmploymentHistory --generate`
2. **–ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ 7 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–º–µ—é—Ç –∑–∞–ø–∏—Å–∏ –≤ employment_history
3. **–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç user_type = "employee"**

### üö® –û–ë–ù–ê–†–£–ñ–ï–ù–ê –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê:
**–ü—Ä–æ–±–ª–µ–º–∞:** UserResource —Å–æ–¥–µ—Ä–∂–∏—Ç —É–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è `contract_type_id` –∏ `tax_status_id`

**–û—à–∏–±–∫–∞:** `RelationshipJoiner::prepareQueryForNoConstraints(): Argument #1 ($relationship) must be of type Illuminate\Database\Eloquent\Relations\Relation, null given`

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∏–∑ UserResource:
- –ü–æ–ª—è `contract_type_id` –∏ `tax_status_id` –∏–∑ —Ñ–æ—Ä–º—ã
- –ö–æ–ª–æ–Ω–∫–∏ `contractType.name` –∏ `taxStatus.name` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã  
- –§–∏–ª—å—Ç—Ä—ã `contract_type` –∏ `tax_status`

### üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å UserResource** - —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å EmploymentHistoryResource** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
4. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** –¥–ª—è departments

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´ (28.11.2024)

### UserResource:
- [x] –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è contract_type_id –∏ tax_status_id –∏–∑ —Ñ–æ—Ä–º—ã
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "–¢–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç user_type (–°–æ—Ç—Ä—É–¥–Ω–∏–∫/–ü–æ–¥—Ä—è–¥—á–∏–∫)
- [x] –£–ª—É—á—à–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "–ü–æ–¥—Ä—è–¥—á–∏–∫" - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞

### EmploymentHistoryResource:
- [x] –°–æ–∑–¥–∞–Ω Resource —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏
- [x] –£–ª—É—á—à–µ–Ω–∞ —Ñ–æ—Ä–º–∞ —Å Select –≤–º–µ—Å—Ç–æ TextInput
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ labels –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º, –æ—Ç–¥–µ–ª–∞–º –∏ —Å—Ç–∞—Ç—É—Å—É

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
- [x] –ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞—é—Ç: /admin/users
- [x] –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö: –≤—Å–µ 7 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–º–µ—é—Ç –∑–∞–ø–∏—Å–∏ employment_history

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´ (28.11.2024)

### ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û:
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω UserResource - –∫–æ–ª–æ–Ω–∫–∞ "–¢–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç user_type
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω UserResource - –∫–æ–ª–æ–Ω–∫–∞ "–ü–æ–¥—Ä—è–¥—á–∏–∫" —É–ª—É—á—à–µ–Ω–∞
- [x] –°–æ–∑–¥–∞–Ω EmploymentHistoryResource

### üö® –ò–°–ü–†–ê–í–õ–ï–ù–ê –û–®–ò–ë–ö–ê:
**–ü—Ä–æ–±–ª–µ–º–∞:** `Unknown column 'users.full_name' in 'field list'`
**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—è `full_name` –≤ SQL-–∑–∞–ø—Ä–æ—Å–∞—Ö
**–†–µ—à–µ–Ω–∏–µ:** 
- –í —Ñ–æ—Ä–º–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º `getOptionLabelFromRecordUsing` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –∏–º–µ–Ω–∏
- –í —Ç–∞–±–ª–∏—Ü–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º `formatStateUsing` –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–ª—è–º
- –í –ø–æ–∏—Å–∫–µ —É–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### üìã –ü–†–û–í–ï–†–ö–ê:
- [ ] –†–∞–∑–¥–µ–ª "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –†–∞–∑–¥–µ–ª "–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –ö–æ–ª–æ–Ω–∫–∞ "–¢–∏–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–°–æ—Ç—Ä—É–¥–Ω–∏–∫" –∏–ª–∏ "–ü–æ–¥—Ä—è–¥—á–∏–∫"
- [ ] –ö–æ–ª–æ–Ω–∫–∞ "–ü–æ–¥—Ä—è–¥—á–∏–∫" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
