# üß™ –°—Ü–µ–Ω–∞—Ä–∏–π 01: –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π workflow (–∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä ‚Üí –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å ‚Üí –¥–∏—Å–ø–µ—Ç—á–µ—Ä)

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 14.01.2026  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω—ã–π  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π

## üéØ –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ —Ü–∏–∫–ª–∞ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–æ–≤–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –∑–∞—è–≤–∫–∏ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π.

## üë• –†–æ–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
1. **–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä (initiator)** - —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω–æ–≤—ã–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏ –∑–∞—è–≤–∫–∏
2. **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (executor)** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–∞–±–æ—Ç—ã
3. **–î–∏—Å–ø–µ—Ç—á–µ—Ä (dispatcher)** - —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—è–≤–∫–∞–º–∏, –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
4. **–ë—Ä–∏–≥–∞–¥–∏—Ä (brigadier)** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ä–æ–ª—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏

## üìã –®–∞–≥–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è

### –®–∞–≥ 1: –ü–ª–∞–Ω–æ–≤–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–∏–≥–∞–¥–∏—Ä–∞
- **–†–æ–ª—å:** –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä
- **–î–µ–π—Å—Ç–≤–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–æ–≤–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (Assignment) —Å —Ç–∏–ø–æ–º `brigadier_schedule`
- **–°—É—â–Ω–æ—Å—Ç–∏:** Assignment ‚Üí User (–±—Ä–∏–≥–∞–¥–∏—Ä)
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞–Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`

### –®–∞–≥ 2: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- **–†–æ–ª—å:** –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å (–±—Ä–∏–≥–∞–¥–∏—Ä)
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ API –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–°—É—â–Ω–æ—Å—Ç–∏:** Assignment (status: pending ‚Üí confirmed)
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, —Å—Ç–∞—Ç—É—Å `confirmed`

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —Å –≤—ã–±–æ—Ä–æ–º –±—Ä–∏–≥–∞–¥–∏—Ä–∞
- **–†–æ–ª—å:** –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä
- **–î–µ–π—Å—Ç–≤–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ WorkRequest —Å –≤—ã–±–æ—Ä–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–≥–æ –±—Ä–∏–≥–∞–¥–∏—Ä–∞
- **–°—É—â–Ω–æ—Å—Ç–∏:** WorkRequest ‚Üí Assignment (–±—Ä–∏–≥–∞–¥–∏—Ä)
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞–Ω–∞ –∑–∞—è–≤–∫–∞ —Å–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º –±—Ä–∏–≥–∞–¥–∏—Ä–æ–º

### –®–∞–≥ 4: –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞—è–≤–∫–∏ –≤ —Ä–∞–±–æ—Ç—É
- **–†–æ–ª—å:** –î–∏—Å–ø–µ—Ç—á–µ—Ä
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ "–≤ —Ä–∞–±–æ—Ç–µ"
- **–°—É—â–Ω–æ—Å—Ç–∏:** WorkRequest (status: draft ‚Üí in_progress)
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞ –≤ —Ä–∞–±–æ—Ç—É –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–º

### –®–∞–≥ 5: –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
- **–†–æ–ª—å:** –î–∏—Å–ø–µ—Ç—á–µ—Ä
- **–î–µ–π—Å—Ç–≤–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –∑–∞—è–≤–∫—É (Assignment —Å —Ç–∏–ø–æ–º `work_request`)
- **–°—É—â–Ω–æ—Å—Ç–∏:** Assignment ‚Üí WorkRequest ‚Üí User (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏)
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞–Ω—ã –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π

### –®–∞–≥ 6: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
- **–†–æ–ª—å:** –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
- **–°—É—â–Ω–æ—Å—Ç–∏:** Assignment (status: pending ‚Üí confirmed/rejected)
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∞—Å—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞, —á–∞—Å—Ç—å –æ—Ç–∫–ª–æ–Ω–∏–ª–∞

### –®–∞–≥ 7: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–∫–∏
- **–†–æ–ª—å:** –°–∏—Å—Ç–µ–º–∞/–î–∏—Å–ø–µ—Ç—á–µ—Ä
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
- **–°—É—â–Ω–æ—Å—Ç–∏:** WorkRequest (status: in_progress ‚Üí completed)
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞—è–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∞, —Å—Ç–∞—Ç—É—Å "–ó–∞—è–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∞"

## üîê –¢—Ä–µ–±—É–µ–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

### –î–ª—è –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞ (initiator):
- `create_assignment` (—Ç–æ–ª—å–∫–æ brigadier_schedule)
- `view_assignment` (—Å–≤–æ–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)
- `create_work_request`
- `view_work_request` (—Å–≤–æ–∏ –∑–∞—è–≤–∫–∏)
- `view_user` (—Ç–æ–ª—å–∫–æ –±—Ä–∏–≥–∞–¥–∏—Ä–æ–≤)

### –î–ª—è –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (executor):
- `view_assignment` (—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)
- `update_assignment` (—Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π)
- `view_work_request` (—Ç–æ–ª—å–∫–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏)

### –î–ª—è –î–∏—Å–ø–µ—Ç—á–µ—Ä–∞ (dispatcher):
- `view_any_assignment`
- `create_assignment` (work_request —Ç–∏–ø)
- `update_assignment` (–ª—é–±—ã–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –∑–∞—è–≤–∫–∞—Ö)
- `view_any_work_request`
- `update_work_request` (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞)
- `view_any_user` (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π)

### –î–ª—è –ë—Ä–∏–≥–∞–¥–∏—Ä–∞ (brigadier):
- –í—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è +
- `view_work_request` (—Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏)
- `view_assignment` (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Å–≤–æ–µ–π –±—Ä–∏–≥–∞–¥—ã)

## üß© –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏

### API endpoints:
- `POST /api/assignments` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π
- `POST /api/assignments/{id}/confirm` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- `POST /api/assignments/{id}/reject` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- `POST /api/work-requests` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
- `PUT /api/work-requests/{id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏

### Filament Resources:
- AssignmentResource
- WorkRequestResource
- UserResource

### Policies:
- AssignmentPolicy
- WorkRequestPolicy
- UserPolicy

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

1. **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–≤
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤:** –¢–æ–ª—å–∫–æ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –Ω–∞ "–≤ —Ä–∞–±–æ—Ç–µ"
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å–≤—è–∑–µ–π:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –±—Ä–∏–≥–∞–¥–∏—Ä–æ–≤
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:** –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–Ω–∞—á–∏–º—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- [ ] –í—Å–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç—É–ø–∞
- [ ] –î–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ä–æ–ª—è–º
- [ ] –°—Ç–∞—Ç—É—Å—ã –∏–∑–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç
- [ ] API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π** –¥–ª—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –¥–µ–π—Å—Ç–≤–∏–π
2. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏** –¥–æ—Å—Ç—É–ø–∞
3. **–û—à–∏–±–∫–∏ –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ** –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏** (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è, –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è)
5. **–û—à–∏–±–∫–∏ –≤ API** –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. –§–∏–∫—Å–∞—Ü–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
3. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–∏—Ç–∏–∫
4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
5. –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
